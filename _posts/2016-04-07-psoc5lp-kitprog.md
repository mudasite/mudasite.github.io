---
layout: post
title: PSoC5LP PrototypingKit の KitProg の話
---
(少なくとも CY8CKIT-059 の)KitProg は5V固定なので注意がいるよという話。

  https://twitter.com/hamuhmau_Humi/status/718019349710114816

で教えていただいたのですが、CY8CKIT-059 の片割れの書き込みボードでは、
USB から直接電源をとっているのでターゲットが 5V じゃない場合に困るようで。

回路図を見てみると、KitProg とターゲットの間の VTARG が問題の端子で、
VBUS -> D1 -> VTARG とつながっているので 5V (-ダイオードの電圧降下分)が
固定でかかるようになっています。

じゃあ D1 取り除けばいいかなと一瞬おもったものの SWDCLK / SWDIO が
結局 KitProg 側の 5V 系の出力になるのでダメですね。電源ラインをつながない
という案ももらったけど同様に問題があるかも。

F2 のリセッタブルフューズのところを切断して J9-1番ピンからターゲット電圧を
入れるのがいいのか、R8 と D1 を取り除いて VBUS を分離して KP_VDD に
入れる(どこから?)か、くらいの改造がいるような雰囲気です。

ターゲット側も R20 を取り除けば KitProg からの電源は遮断できるので
VDD 3.3V とかで動かすならやっておいたほうがいいのかも。

で、回路図をながめているうちに、KitProg の PSoC5LP を書き換えられたら
いいのに！と思ったのですがこれは簡単ではなさそう？ でも KitProg の
ファームウェアアップグレードはできたからなにか方法があるのかもしれないけど。。
